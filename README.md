## weewa_buildroot

weewa基于rockchip buildroot的相关定制文件, 方便编译支持不同硬件版本的固件. 由于目前要支持的硬件有334/586/678三种, 经过试验发现没法同时兼容, 因此创建该项目简化打包固件流程

## 前置准备

* 先确认weewa的工程已经在`buildroot/external`下做了符号链接, 这一步一般大家都做过了, 就先不介绍了. 脚本会检查这些链接是否存在, 不存在会有提示
* 还有确认weewa的包描述文件在`buildroot/package/rockchip`下面也做了符号链接, 这一步一般大家都做过了, 就先不介绍了. 脚本会检查这些链接是否存在, 不存在会有提示
* 回到`buildroot`根目录下, clone出这个工程`git clone git@github.com:ztwireless/weewa_buildroot.git`

## 打包 

* 执行weewa_buildroot里面的build.sh就可以进行自动打包了, 这个脚本支持以下参数:
	1. `--586`: 表示打一个支持imx586的包(不支持334/678), 如果不写, 则打出的包是支持334/678的
	2. `--full`: 表示打一个完整包, 如果不写, 就是打一个增量包
	3. `--clean`: 表示打包之前重新编译所有依赖, 一般不需要这个, 因为重新编译所有非常慢, 所以一般只有第一次打包的时候需要
	4. `--adb`: 表示打出来的包会支持相机开机后自动开启`adb`, 测试的时候需要这个, 不然刷机之后不太方便用adb连接相机. 这个标志应该需要和`--full`同时使用, 我没测过, 估计是这样, 因为增量包估计不会更新这部分内容.
	5. `--version=x.y.z`: 指定固件的版本号, 版本号的格式应该是x.y.z的样式, 默认是1.0.0
	6. `--version-code=x`: 指定固定的版本号数字, 应该就是一个十进制数字, 默认是1
	7. `--version_code=x`: 这个和上面一样, 只是做了一个兼容, 免得有些人可能习惯打成下划线了
	8. `--dry-run`: 测试运行模式, 用来测试脚本, 这个模式不会实际的去拷贝文件和编译, 只是验证一下脚本的流程正确, 不会修改任何东西
	9. `--dry_run`: 同上, 只是为了支持下划线的写法